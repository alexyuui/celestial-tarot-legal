<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Celestial Tarot - Authorization</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0a0a2e 0%, #1a1a4e 50%, #0d0d3d 100%);
            color: #fff;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .card {
            background: rgba(255,255,255,0.08);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 16px;
            padding: 40px;
            max-width: 450px;
            text-align: center;
        }
        .icon { font-size: 48px; margin-bottom: 16px; }
        h1 { font-size: 22px; margin-bottom: 8px; }
        p { font-size: 14px; color: rgba(255,255,255,0.6); line-height: 1.6; margin-bottom: 16px; }
        .code-box {
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 12px;
            font-family: monospace;
            font-size: 14px;
            word-break: break-all;
            margin-bottom: 16px;
            color: #81c784;
        }
        .back-link {
            display: inline-block;
            color: rgba(255,255,255,0.5);
            text-decoration: none;
            font-size: 13px;
            margin-top: 8px;
        }
        .back-link:hover { color: #fff; }
        .error { color: #e57373; }
        .success { color: #81c784; }
    </style>
</head>
<body>
    <div class="card">
        <div class="icon" id="icon">‚è≥</div>
        <h1 id="title">Processing Authorization...</h1>
        <p id="message">Please wait while we complete the TikTok connection.</p>
        <div id="code-box" class="code-box" style="display:none;"></div>
        <a href="index.html" class="back-link">‚Üê Back to Celestial Tarot</a>
    </div>

    <script>
        const params = new URLSearchParams(window.location.search);
        const code = params.get('code');
        const error = params.get('error');
        const state = params.get('state');

        const icon = document.getElementById('icon');
        const title = document.getElementById('title');
        const message = document.getElementById('message');
        const codeBox = document.getElementById('code-box');

        if (error) {
            icon.textContent = '‚ùå';
            title.textContent = 'Authorization Failed';
            title.className = 'error';
            message.textContent = 'TikTok authorization was denied or an error occurred. Error: ' + error;
        } else if (code) {
            icon.textContent = '‚úÖ';
            title.textContent = 'Authorization Successful!';
            title.className = 'success';
            message.textContent = 'Your TikTok account has been connected. The authorization code has been received and will be used to set up automatic video publishing.';
            codeBox.style.display = 'block';
            codeBox.textContent = 'Authorization code: ' + code.substring(0, 20) + '...';
        } else {
            icon.textContent = 'üîÆ';
            title.textContent = 'Celestial Tarot Callback';
            message.textContent = 'This page handles TikTok OAuth authorization callbacks. Please start from the main page to connect your TikTok account.';
        }
    </script>
</body>
</html>
